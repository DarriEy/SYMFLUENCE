### ============================================= SYMFLUENCE configuration file ============================================================
# Gulkana Glacier Domain - Dual Calibration (Streamflow + GRACE TWS)
# Multi-objective calibration using NSGA-II for glacierized basin

# Global and Logging Settings
SYMFLUENCE_DATA_DIR: default
SYMFLUENCE_CODE_DIR: default
DOMAIN_NAME: "Gulkana"
EXPERIMENT_ID: dual_calibration
EXPERIMENT_TIME_START: 2015-01-01 00:00
EXPERIMENT_TIME_END: 2016-12-31 23:00
NUM_PROCESSES: 1
LOG_LEVEL: INFO
LOG_TO_FILE: True
LOG_FORMAT: detailed

# Geospatial Definition
# Gulkana Glacier: USGS gauge 15478040 (Phelan Creek near Paxson)
POUR_POINT_COORDS: 63.2408/-145.4675
BOUNDING_BOX_COORDS: 63.35/-145.60/63.15/-145.35
DOMAIN_DEFINITION_METHOD: lumped
GEOFABRIC_TYPE: MERIT
SUB_GRID_DISCRETIZATION: elevation
ELEVATION_BAND_SIZE: 400

# Data Access and Forcings
DATA_ACCESS: CLOUD
FORCING_DATASET: ERA5
FORCING_VARIABLES:
  - airtemp
  - windspd
  - pptrate
  - spechum
  - SWRadAtm
  - LWRadAtm
  - airpres
FORCING_TIME_STEP_SIZE: 3600
APPLY_LAPSE_RATE: True
LAPSE_RATE: -6.5

# Attribute Acquisition
DEM_SOURCE: copernicus
DOWNLOAD_DEM: True
DOWNLOAD_SOIL: True
DOWNLOAD_LAND_COVER: True
DOWNLOAD_GLACIER_DATA: True

# Streamflow Observations - USGS
STREAMFLOW_DATA_PROVIDER: USGS
USGS_SITE_CODE: "15478040"
DOWNLOAD_USGS_DATA: True

# GRACE TWS Observations
DOWNLOAD_GRACE: True
GRACE_PRODUCT: RL06
ADDITIONAL_OBSERVATIONS: [GRACE]

# Catchment shapefile path (for GRACE processing)
CATCHMENT_PATH: default
CATCHMENT_SHP_NAME: Gulkana_HRUs_elevation.shp

# Model Configuration
HYDROLOGICAL_MODEL: SUMMA
ROUTING_MODEL: none
SETTINGS_SUMMA_GLACIER_MODE: True
SETTINGS_SUMMA_FILEMANAGER: fileManager.txt
SETTINGS_SUMMA_COLDSTATE: coldState.nc
SETTINGS_SUMMA_ATTRIBUTES: attributes.nc
SETTINGS_SUMMA_TRIALPARAMS: trialParams.nc
SETTINGS_SUMMA_FORCING_LIST: forcingFileList.txt

# TWS Components for glacierized basin
TWS_STORAGE_COMPONENTS: scalarSWE,scalarCanopyWat,scalarTotalSoilWat,scalarAquiferStorage,glacMass4AreaChange

# Calibration Settings
SPINUP_PERIOD: "2015-01-01,2015-09-30"
CALIBRATION_PERIOD: "2015-10-01,2016-09-30"
EVALUATION_PERIOD: "2016-10-01,2016-12-31"
CALIBRATION_TIMESTEP: daily

# Multi-objective NSGA-II Optimization
OPTIMIZATION_METHODS:
  - iteration

ITERATIVE_OPTIMIZATION_ALGORITHM: NSGA-II
NSGA2_MULTI_TARGET: True
NSGA2_PRIMARY_TARGET: streamflow
NSGA2_SECONDARY_TARGET: tws
NSGA2_PRIMARY_METRIC: KGE
NSGA2_SECONDARY_METRIC: KGE
NSGA2_CROSSOVER_RATE: 0.9
NSGA2_MUTATION_RATE: 0.1
NSGA2_ETA_C: 20
NSGA2_ETA_M: 20

# Parameters to calibrate - snow and soil parameters important for glacier hydrology
PARAMS_TO_CALIBRATE: newSnowDenMin,Fcapil,k_soil,k_macropore,tempCritRain,tempRangeTimestep,frozenPrecipMultip,albedoMax,albedoMinWinter,k_snow
BASIN_PARAMS_TO_CALIBRATE: routingGammaScale,basin__aquiferScaleFactor

# Optimization settings
NUMBER_OF_ITERATIONS: 50
POPULATION_SIZE: 20

# SUMMA Installation
SUMMA_INSTALL_PATH: default
SUMMA_EXE: summa_sundials.exe
