# ================================================================================
# Durance River (France) SUMMA Calibration Configuration
# Alpine catchment in southeastern France - Hub'Eau streamflow data
# ================================================================================
# Test validates:
# - Hub'Eau French streamflow API integration
# - ERA5 forcing for European domain
# - SUMMA calibration with French observational data
# - Alpine hydrology with snow processes
# ================================================================================

# Experiment metadata
EXPERIMENT_ID: durance_summa_calibration
DOMAIN_NAME: durance_serre_poncon

# Domain definition - Delineated watershed
DOMAIN_DEFINITION_METHOD: delineate
ROUTING_DELINEATION: lumped
SUB_GRID_DISCRETIZATION: elevation  # Elevation bands for alpine catchment
ELEVATION_BAND_SIZE: 500  # 500m elevation bands

# Pour point: Durance at Serre-Ponçon dam (Hub'Eau station V2634010)
# Location: 44.5214°N, 6.2856°E
POUR_POINT_COORDS: 44.5214/6.2856
BOUNDING_BOX_COORDS: 45.3/5.5/44.1/7.0  # north/west/south/east

DELINEATE_BY_POURPOINT: true
DELINEATION_METHOD: stream_threshold
STREAM_THRESHOLD: 7500  # Higher threshold for mountainous terrain
LUMPED_WATERSHED_METHOD: TauDEM
GEOFABRIC_TYPE: na

# Time periods (5 years: 2017-2021)
EXPERIMENT_TIME_START: '2017-01-01 00:00'
EXPERIMENT_TIME_END: '2021-12-31 23:00'
SPINUP_PERIOD: '2017-01-01, 2017-12-31'        # 1 year spinup
CALIBRATION_PERIOD: '2018-01-01, 2019-12-31'   # 2 year calibration
EVALUATION_PERIOD: '2020-01-01, 2021-12-31'    # 2 year evaluation
CALIBRATION_TIMESTEP: daily

# Cloud data access
DATA_ACCESS: cloud
DEM_SOURCE: copernicus
DOWNLOAD_DEM: true
DOWNLOAD_SOIL: true
DOWNLOAD_LAND_COVER: true
LAND_CLASS_SOURCE: modis

# Forcing dataset - ERA5 (global coverage, hourly)
FORCING_DATASET: ERA5
FORCING_TIME_STEP_SIZE: 3600  # Hourly
FORCING_MEASUREMENT_HEIGHT: 2

# Observations - Hub'Eau French streamflow
STATION_ID: 'V2634010'  # Durance at Serre-Ponçon
STREAMFLOW_DATA_PROVIDER: hubeau
DOWNLOAD_HUBEAU_DATA: true

# Hub'Eau specific settings
evaluation:
  streamflow:
    station_id: 'V2634010'
    data_provider: hubeau
  hubeau:
    download: true
    use_daily: true  # Use processed daily data (QC'd)

# Disable other observation sources
DOWNLOAD_USGS_DATA: false
DOWNLOAD_SMHI_DATA: false
DOWNLOAD_SNOTEL: false
DOWNLOAD_WSC_DATA: false

# Enable snow observations for alpine validation
DOWNLOAD_MODIS_SNOW: true
DOWNLOAD_GRACE: false

# Model configuration - SUMMA
HYDROLOGICAL_MODEL: SUMMA
SUMMA_EXE: summa_sundials.exe
SUMMA_INSTALL_PATH: default
SETTINGS_SUMMA_PATH: default
SETTINGS_SUMMA_GRU_COUNT: auto  # Based on elevation bands
SETTINGS_SUMMA_USE_PARALLEL_SUMMA: true

# Routing
ROUTING_MODEL: mizuroute
ROUTING_EXE: mizuRoute.exe

# SUMMA decision files - Snow-focused for alpine catchment
SUMMA_DECISIONS:
  soilCatTbl: ROSETTA
  vegeParTbl: USGS
  soilStress: NoahType
  stomResist: BallBerry
  num_method: itertive
  fDerivMeth: analytic
  LAI_method: specified
  cIntercept: sparseCanopy
  f_Richards: mixdform
  groundwatr: qbaseTopmodel
  hc_Profile: constant
  bcUpprTdyn: nrg_flux
  bcLowrTdyn: zeroFlux
  bcUpprSoiH: liq_flux
  bcLowrSoiH: drainage
  veg_traits: CLM_2stream
  canopyEmis: difTrans
  snowIncept: lightSnow
  windPrfile: logBelowCanopy
  astability: louisinv
  canopySrad: BessSrad
  alb_method: varDecay
  compaction: anderson
  snowLayers: CLM_2010
  thCondSnow: jrdn1991
  thCondSoil: funcSoilWet

# Optimization configuration
OPTIMIZATION_METHODS: ['iteration']
ITERATIVE_OPTIMIZATION_ALGORITHM: DDS
OPTIMIZATION_METRIC: KGE
OPTIMIZATION_TARGET: streamflow
EVALUATION_DATA: ['streamflow']
NUMBER_OF_ITERATIONS: 500

# DDS algorithm settings
DDS_R: 0.2

# SUMMA parameters to calibrate (snow and soil focused)
PARAMS_TO_CALIBRATE: k_soil,theta_sat,theta_res,vGn_alpha,vGn_n,critSoilWilting,critSoilTranspire,winterSAI,summerLAI,newSnowDenMin,newSnowDenMax,tempCritRain,tempRangeTimestep
# k_soil: saturated hydraulic conductivity
# theta_sat: porosity
# theta_res: residual water content
# vGn_alpha, vGn_n: van Genuchten parameters
# critSoilWilting, critSoilTranspire: soil moisture thresholds
# winterSAI, summerLAI: vegetation parameters
# newSnowDenMin, newSnowDenMax: snow density params (important for alpine)
# tempCritRain, tempRangeTimestep: rain/snow partitioning (critical for alpine)

BASIN_PARAMS_TO_CALIBRATE: routingGammaScale,routingGammaShape

# Project paths (update these for your system)
SYMFLUENCE_CODE_DIR: /path/to/SYMFLUENCE
SYMFLUENCE_DATA_DIR: /path/to/SYMFLUENCE_data
OUTPUT_DIR: default

# Analysis and reporting
ANALYSES: [benchmarking, attributes, visualization, optimization]

# System settings
LOG_LEVEL: INFO
RANDOM_SEED: 42
FORCE_RUN_ALL_STEPS: false
NUM_PROCESSES: 8
SUPPLEMENT_FORCING: false
